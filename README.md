# Генератор сценариев для аудиоисторий

Приложение Streamlit, помогающее авторам создавать и улучшать сценарии аудиоисторий с использованием языковых моделей (LLM) OpenAI.

## Возможности

- Создание и управление несколькими проектами сценариев
- Генерация детальных сценариев на основе кратких описаний
- Улучшение сценариев путем предоставления конкретных инструкций ИИ
- Выбор предыдущих версий сценария для использования в качестве контекста при улучшениях
- Подсчет токенов и оценка стоимости
- Скачивание сценариев в текстовом формате
- Отслеживание версий сценариев и использованных промптов

## Требования

- Python 3.8+
- Streamlit
- Ключ API OpenAI

## Установка

1. Клонируйте этот репозиторий:
   ```
   git clone <url-репозитория>
   cd <директория-репозитория>
   ```

2. Создайте виртуальное окружение (опционально, но рекомендуется):
   ```
   python -m venv venv
   
   # В Windows
   venv\Scripts\activate
   
   # В macOS или Linux
   source venv/bin/activate
   ```

3. Установите необходимые пакеты:
   ```
   pip install -r requirements.txt
   ```

4. Настройте ключ API OpenAI:
   - Создайте директорию `.streamlit` в корне проекта, если она не существует
   - Создайте файл `secrets.toml` внутри директории `.streamlit`
   - Добавьте ваш ключ API OpenAI в следующем формате:
     ```toml
     [openai]
     api_key = "ваш-ключ-api-openai"
     ```
   
   Альтернативно, вы можете использовать скрипт запуска, который запросит ваш ключ API.

## Быстрый старт

Самый простой способ запустить приложение — использовать скрипт запуска:

```
python run.py
```

Этот скрипт:
1. Проверит, установлены ли все необходимые пакеты
2. Установит недостающие требования
3. Проверит, существует ли файл `.streamlit/secrets.toml` с ключом API
4. Запросит ключ API, если необходимо
5. Запустит приложение Streamlit

Альтернативно, вы можете запустить приложение напрямую с помощью Streamlit:

```
streamlit run app.py
```

## Использование

1. Откройте приложение в веб-браузере (обычно по адресу http://localhost:8501)

2. Создайте новый сценарий:
   - Нажмите "Создать новый сценарий" в боковой панели
   - Введите название и краткое описание вашей аудиоистории

3. Сгенерируйте сценарий:
   - Выберите модель ИИ (GPT-4o, GPT-4o-mini и т.д.)
   - Введите промпт, описывающий, что вы хотите видеть в сценарии
   - Нажмите "Сгенерировать сценарий"

4. Улучшите ваш сценарий:
   - Просмотрите сгенерированный сценарий
   - Выберите предыдущие версии для включения в контекст (если применимо)
   - Введите новый промпт, описывающий желаемые изменения
   - Сгенерируйте новую версию

5. Скачайте ваш финальный сценарий:
   - Перейдите к версии, которую вы хотите скачать
   - Нажмите "Скачать эту версию"

## Хранение данных

Приложение хранит данные локально:
- `data/scripts.json`: Содержит метаданные для всех сценариев
- `data/versions_<script_id>.json`: Содержит все версии конкретного сценария

## Доступные модели

- **gpt-4o**: Наивысшее качество, более дорогая
  - Контекстное окно: 128K токенов
  - Стоимость ввода: $5 за 1M токенов
  - Стоимость вывода: $15 за 1M токенов

- **gpt-4o-2024-08-06**: Высокое качество, средняя стоимость
  - Контекстное окно: 128K токенов
  - Стоимость ввода: $2.5 за 1M токенов
  - Стоимость вывода: $10 за 1M токенов

- **gpt-4o-mini**: Хорошее качество, наиболее доступная
  - Контекстное окно: 128K токенов
  - Стоимость ввода: $0.15 за 1M токенов
  - Стоимость вывода: $0.6 за 1M токенов

## Расширенная настройка

Вы можете изменить следующие файлы для настройки приложения:

- `config.py`: Содержит определения моделей, системные промпты и другие настройки
- `utils.py`: Содержит служебные функции для подсчета токенов, оценки стоимости и т.д.
- `app.py`: Основное приложение Streamlit
- `.streamlit/secrets.toml`: Содержит ваш ключ API OpenAI и другие секреты

## Устранение неполадок

Если вы столкнулись с проблемами:

1. Убедитесь, что ваш ключ API OpenAI действителен и правильно установлен в файле `.streamlit/secrets.toml`
2. Проверьте, установлены ли все необходимые пакеты
3. Убедитесь, что у вас есть достаточные права для создания и записи файлов в директории приложения

## Лицензия

[Информация о вашей лицензии] 